# MDS Content Creation OS - Tool Definitions
# Tools available to agents for creative production

# ═══════════════════════════════════════════════════════════════════════════════
# INTAKE LAYER TOOLS
# ═══════════════════════════════════════════════════════════════════════════════

intent_extractor:
  name: "Intent Extractor"
  description: |
    Extracts multi-layered intent from creative briefs.
    Parses literal, functional, strategic, emotional, and temporal dimensions.
  input_schema:
    type: object
    properties:
      brief:
        type: string
        description: "The raw creative brief text"
    required: ["brief"]
  output_schema:
    type: object
    properties:
      literal_intent:
        type: string
      functional_goal:
        type: string
      strategic_objective:
        type: string
      emotional_target:
        type: string
      temporal_context:
        type: string

context_analyzer:
  name: "Context Analyzer"
  description: |
    Analyzes surrounding context for creative decisions.
    Considers market position, competitive landscape, and timing.
  input_schema:
    type: object
    properties:
      intent:
        type: object
      additional_context:
        type: string
    required: ["intent"]

brand_analyzer:
  name: "Brand Analyzer"
  description: |
    Extracts brand DNA from guidelines or existing assets.
    Identifies personality, voice, visual language, and constraints.
  input_schema:
    type: object
    properties:
      brand_guidelines:
        type: string
        description: "Brand guidelines document or URL"
      reference_assets:
        type: array
        items:
          type: string
        description: "URLs or paths to reference assets"
    required: []

style_matcher:
  name: "Style Matcher"
  description: |
    Matches creative direction to brand style parameters.
    Ensures consistency while allowing creative expression.
  input_schema:
    type: object
    properties:
      creative_direction:
        type: object
      brand_profile:
        type: object
    required: ["creative_direction", "brand_profile"]

platform_matcher:
  name: "Platform Matcher"
  description: |
    Matches creative requirements to optimal AI platforms.
    Considers duration, quality, speed, and capability constraints.
  input_schema:
    type: object
    properties:
      requirements:
        type: object
        properties:
          duration:
            type: string
          quality_level:
            type: string
          content_type:
            type: string
          has_audio:
            type: boolean
    required: ["requirements"]
  platform_database:
    sora_2_pro:
      duration_range: "5-20s"
      strengths: ["long-horizon consistency", "complex narratives", "native audio"]
      weaknesses: ["fluid dynamics", "hand anatomy", "specific text"]
      format: "prose-first"
    veo_3_1:
      duration_range: "0-8s"
      strengths: ["sharp textures", "photorealism", "audio architecture"]
      weaknesses: ["short duration", "complex motion"]
      format: "json-priority-cascade"
    runway_gen3:
      duration_range: "5-10s"
      strengths: ["fast iteration", "motion control", "stylization"]
      weaknesses: ["less photorealistic", "consistency"]
      format: "concise-prose"
    kling_1_6:
      duration_range: "5-10s"
      strengths: ["good motion", "cost-effective"]
      weaknesses: ["consistency issues", "detail accuracy"]
      format: "subject-focused"
    midjourney_v6_1:
      strengths: ["artistic interpretation", "style control", "composition"]
      weaknesses: ["text rendering", "specific details"]
      format: "prose-parameters"
    dalle_3:
      strengths: ["instruction following", "text rendering"]
      weaknesses: ["artistic consistency"]
      format: "precise-instructions"
    ideogram_2:
      strengths: ["text rendering", "logos"]
      weaknesses: ["artistic interpretation"]
      format: "text-optimized"
    flux_pro:
      strengths: ["photorealism", "detail"]
      weaknesses: ["creative interpretation"]
      format: "technical-precision"

spec_validator:
  name: "Specification Validator"
  description: |
    Validates creative specifications against platform requirements.
    Checks aspect ratios, durations, safe zones, and technical constraints.
  input_schema:
    type: object
    properties:
      specifications:
        type: object
      target_platform:
        type: string
    required: ["specifications", "target_platform"]

format_analyzer:
  name: "Format Analyzer"
  description: |
    Analyzes and classifies content format requirements.
    Maps to content taxonomy (Ads, Social, Narrative, Corporate, Product, Cinematic).
  input_schema:
    type: object
    properties:
      intent:
        type: object
      platform:
        type: string
    required: ["intent"]

duration_optimizer:
  name: "Duration Optimizer"
  description: |
    Optimizes content duration based on format and platform.
    Considers attention curves, platform limits, and narrative needs.
  input_schema:
    type: object
    properties:
      format:
        type: string
      platform:
        type: string
      narrative_complexity:
        type: string
    required: ["format", "platform"]

# ═══════════════════════════════════════════════════════════════════════════════
# CREATIVE DIRECTOR TOOLS
# ═══════════════════════════════════════════════════════════════════════════════

creative_orchestrator:
  name: "Creative Orchestrator"
  description: |
    Orchestrates the creative process across all agents.
    Ensures coherent vision from intake to output.
  input_schema:
    type: object
    properties:
      intake_results:
        type: object
      creative_goals:
        type: object
    required: ["intake_results", "creative_goals"]

quality_gate:
  name: "Quality Gate"
  description: |
    Enforces quality standards at each stage of production.
    Blocks progression if standards not met.
  input_schema:
    type: object
    properties:
      stage:
        type: string
      deliverable:
        type: object
      standards:
        type: object
    required: ["stage", "deliverable"]

shot_designer:
  name: "Shot Designer"
  description: |
    Designs individual shots with camera, composition, and purpose.
    Applies cinematographic grammar and visual language.
  input_schema:
    type: object
    properties:
      emotional_intent:
        type: string
      subject:
        type: string
      context:
        type: string
    required: ["emotional_intent", "subject"]
  shot_grammar:
    ecu: "Single feature - Intimacy, intensity, revelation"
    cu: "Face fills frame - Emotion, connection, reaction"
    mcu: "Head and shoulders - Conversational, presentational"
    ms: "Waist up - Context with intimacy"
    mls: "Knees up - Body language visible"
    ls: "Full body with environment - Context, scale, isolation"
    els: "Subject small in vast environment - Epic scale, insignificance"

lens_selector:
  name: "Lens Selector"
  description: |
    Selects optimal lens and aperture for emotional intent.
    Applies lens psychology and depth of field principles.
  input_schema:
    type: object
    properties:
      emotional_intent:
        type: string
      shot_type:
        type: string
      environment:
        type: string
    required: ["emotional_intent", "shot_type"]
  lens_psychology:
    14-24mm: "Extreme wide - Disorientation, vastness, intimacy (close)"
    24-35mm: "Wide - Context-rich, journalistic"
    35-50mm: "Normal - Neutral, filmic, balanced"
    85-135mm: "Flattering compression - Beauty, isolation"
    200mm+: "Heavy compression - Voyeuristic, isolation"

lighting_designer:
  name: "Lighting Designer"
  description: |
    Designs lighting setups for emotional and technical goals.
    Applies light as narrative and mood tool.
  input_schema:
    type: object
    properties:
      emotional_intent:
        type: string
      environment:
        type: string
      time_of_day:
        type: string
    required: ["emotional_intent"]
  lighting_reference:
    hard: "Drama, tension, definition"
    soft: "Romance, beauty, comfort"
    front: "Clinical, beauty, safety"
    side_45: "Sculptural, dimensional, cinematic"
    side_90: "Conflict, duality, mystery"
    rim: "Separation, mystery, ethereal"

arc_designer:
  name: "Emotional Arc Designer"
  description: |
    Designs emotional journey and narrative arc.
    Engineers anticipation, tension, and release.
  input_schema:
    type: object
    properties:
      core_emotion:
        type: string
      duration:
        type: number
      content_type:
        type: string
    required: ["core_emotion", "duration"]

hook_engineer:
  name: "Hook Engineer"
  description: |
    Designs attention-capture hooks for the 0.8s window.
    Creates pattern interrupts and visual anchors.
  input_schema:
    type: object
    properties:
      target_audience:
        type: string
      platform:
        type: string
      content_type:
        type: string
    required: ["platform"]

pacing_optimizer:
  name: "Pacing Optimizer"
  description: |
    Optimizes rhythm, breath points, and cut timing.
    Balances energy with contemplation.
  input_schema:
    type: object
    properties:
      duration:
        type: number
      emotional_arc:
        type: object
      content_type:
        type: string
    required: ["duration", "emotional_arc"]

environment_builder:
  name: "Environment Builder"
  description: |
    Constructs production environments from concept to specification.
    Location scouting, set dressing, atmosphere design.
  input_schema:
    type: object
    properties:
      concept:
        type: string
      mood:
        type: string
      practical_constraints:
        type: array
    required: ["concept", "mood"]

material_designer:
  name: "Material Designer"
  description: |
    Designs material appearances and behaviors.
    Translates physics to poetry for AI generation.
  input_schema:
    type: object
    properties:
      material_type:
        type: string
      context:
        type: string
      lighting_conditions:
        type: string
    required: ["material_type"]
  translation_examples:
    water: "Shattering into crystalline shards"
    metal: "Surfaces catching ambient light"
    leather: "Worn to whisper-soft by years of devotion"
    glass: "Holding light hostage"
    steam: "Rising in ephemeral wisps"

atmosphere_creator:
  name: "Atmosphere Creator"
  description: |
    Designs atmospheric elements (fog, haze, dust, particles).
    Creates depth and mood through volumetrics.
  input_schema:
    type: object
    properties:
      mood:
        type: string
      density:
        type: string
      light_interaction:
        type: string
    required: ["mood"]

# ═══════════════════════════════════════════════════════════════════════════════
# PLATFORM FORMATTER TOOLS
# ═══════════════════════════════════════════════════════════════════════════════

sora_formatter:
  name: "Sora 2 Pro Formatter"
  description: |
    Formats prompts for Sora 2 Pro prose-first methodology.
    Creates dense, immersive prose at 150-250 words per shot.
  input_schema:
    type: object
    properties:
      creative_package:
        type: object
      duration:
        type: number
      aspect_ratio:
        type: string
    required: ["creative_package"]
  output_template: |
    ═══════════════════════════════════════════════════════════════════════════════
    [PROJECT TITLE]
    ═══════════════════════════════════════════════════════════════════════════════

    CORE VISUAL CONCEPT:
    [2-4 richly evocative sentences]

    THEMES: [5-7 comma-separated themes]
    EMOTIONAL ARC: [Act 1] → [Act 2] → [Act 3] → [Resolution]

    TECHNICAL SPECIFICATIONS:
    - Duration: [X] seconds
    - Aspect Ratio: [16:9 / 9:16 / 2.39:1]
    - Camera System: [ARRI/RED/Sony]
    - Primary Lens: [Brand + focal length]

    ═══════════════════════════════════════════════════════════════════════════════
    ACT [N]: [EVOCATIVE TITLE] ([START]s - [END]s)
    ═══════════════════════════════════════════════════════════════════════════════

    SHOT [N]: [EVOCATIVE SHOT TITLE]
    Duration: [X.X] seconds
    Shot Type: [ECU/CU/MS/LS], [Angle]

    [150-250 WORDS OF DENSE, IMMERSIVE PROSE]

    Camera Movement:
    - START: [Poetic description of initial framing]
    - MOVEMENT: [Movement with emotional purpose]
    - END: [Final composition and emotional landing]

    Lighting:
    - Key: [Source, Kelvin, mood]
    - Fill: [Ratio, emotional purpose]
    - Special: [Practicals, volumetrics]

veo_formatter:
  name: "VEO 3.1 JSON Formatter"
  description: |
    Formats prompts for VEO 3.1 JSON priority cascade architecture.
    Creates structured JSON with 7-layer priority system.
  input_schema:
    type: object
    properties:
      creative_package:
        type: object
    required: ["creative_package"]
  output_template: |
    {
      "prompt_architecture": "GOLD_STANDARD_VEO_3.1_CINEMATIC_v1",
      "priority_cascade": "1_VIDEO_FOUNDATION → 2_CINEMATOGRAPHY → 3_MOTION_BLOCKING → 4_SUBJECT_PERFORMANCE → 5_ENVIRONMENTAL_DYNAMICS → 6_AUDIO_ARCHITECTURE → 7_POST_PRODUCTION",

      "1_VIDEO_FOUNDATION": {
        "technical_specs": {...},
        "shot_structure": {...},
        "narrative_objective": "..."
      },
      "2_CINEMATOGRAPHY": {...},
      "3_MOTION_BLOCKING": {...},
      "4_SUBJECT_PERFORMANCE": {...},
      "5_ENVIRONMENTAL_DYNAMICS": {...},
      "6_AUDIO_ARCHITECTURE": {...},
      "7_POST_PRODUCTION": {...},

      "FINAL_EXECUTABLE_PROMPT": "Dense prose summary..."
    }

midjourney_formatter:
  name: "Midjourney V6.1 Formatter"
  description: |
    Formats prompts for Midjourney with parameters.
    Balances evocative prose with technical syntax.
  input_schema:
    type: object
    properties:
      creative_package:
        type: object
      aspect_ratio:
        type: string
      style:
        type: string
      style_reference:
        type: string
    required: ["creative_package"]
  parameter_reference:
    --ar: "Aspect ratio (16:9, 9:16, 1:1, 4:3, 3:2)"
    --style: "Style preset (raw, 4a, 4b, 4c)"
    --sref: "Style reference URL"
    --v: "Version (6.1)"
    --chaos: "Variation (0-100)"
    --stylize: "Stylization strength (0-1000)"

runway_formatter:
  name: "Runway Gen-3 Formatter"
  description: |
    Formats prompts for Runway Gen-3 Alpha.
    Creates concise prose with motion descriptions.
  input_schema:
    type: object
    properties:
      creative_package:
        type: object
    required: ["creative_package"]

# ═══════════════════════════════════════════════════════════════════════════════
# OUTPUT GENERATION TOOLS
# ═══════════════════════════════════════════════════════════════════════════════

prose_generator:
  name: "Prose Generator"
  description: |
    Generates dense, immersive prose for AI video generators.
    Applies "physics through poetry" principle.
  input_schema:
    type: object
    properties:
      scene_elements:
        type: object
      target_word_count:
        type: number
      emotional_intent:
        type: string
    required: ["scene_elements", "emotional_intent"]

json_formatter:
  name: "JSON Structure Formatter"
  description: |
    Formats creative content into platform-specific JSON structures.
  input_schema:
    type: object
    properties:
      content:
        type: object
      schema:
        type: string
    required: ["content", "schema"]

prompt_validator:
  name: "Prompt Validator"
  description: |
    Validates prompts against AI platform constraints.
    Checks for failure triggers and optimizes for success.
  input_schema:
    type: object
    properties:
      prompt:
        type: string
      platform:
        type: string
    required: ["prompt", "platform"]
  failure_triggers:
    fluid_dynamics: "Describe visual appearance, not physics"
    hands: "Simple poses, describe expected outcome"
    text_logos: "Describe quality feeling, not literal text"
    reflections: "Keep vague, avoid specific content"
    steam_fog: "Atmospheric, accept imperfection"
    screens: "Keep soft-focus or off"

image_prose_generator:
  name: "Image Prose Generator"
  description: |
    Generates evocative prose for image generators.
    Balances artistic description with technical precision.
  input_schema:
    type: object
    properties:
      concept:
        type: string
      style:
        type: string
      technical_requirements:
        type: object
    required: ["concept"]

parameter_optimizer:
  name: "Parameter Optimizer"
  description: |
    Optimizes platform-specific parameters for image generation.
  input_schema:
    type: object
    properties:
      base_prompt:
        type: string
      platform:
        type: string
      goals:
        type: object
    required: ["base_prompt", "platform"]

style_reference_manager:
  name: "Style Reference Manager"
  description: |
    Manages and applies style references for consistent output.
  input_schema:
    type: object
    properties:
      style_refs:
        type: array
      blend_mode:
        type: string
    required: ["style_refs"]

soundscape_designer:
  name: "Soundscape Designer"
  description: |
    Designs ambient soundscapes and audio environments.
  input_schema:
    type: object
    properties:
      environment:
        type: string
      mood:
        type: string
      visual_sync_points:
        type: array
    required: ["environment", "mood"]

music_director:
  name: "Music Director"
  description: |
    Directs musical elements and compositions.
  input_schema:
    type: object
    properties:
      emotional_arc:
        type: object
      style:
        type: string
      tempo_range:
        type: string
    required: ["emotional_arc"]

dialogue_coordinator:
  name: "Dialogue Coordinator"
  description: |
    Coordinates dialogue delivery and voiceover direction.
  input_schema:
    type: object
    properties:
      script:
        type: string
      tone:
        type: string
      delivery_style:
        type: string
    required: ["script"]

shot_breakdown_generator:
  name: "Shot Breakdown Generator"
  description: |
    Generates detailed shot-by-shot breakdowns for storyboards.
  input_schema:
    type: object
    properties:
      narrative:
        type: object
      cinematography:
        type: object
      duration:
        type: number
    required: ["narrative", "duration"]

visual_reference_curator:
  name: "Visual Reference Curator"
  description: |
    Curates and organizes visual references for creative direction.
  input_schema:
    type: object
    properties:
      concept:
        type: string
      style_keywords:
        type: array
    required: ["concept"]

timeline_designer:
  name: "Timeline Designer"
  description: |
    Designs timing and pacing for storyboard sequences.
  input_schema:
    type: object
    properties:
      shots:
        type: array
      total_duration:
        type: number
      pacing_style:
        type: string
    required: ["shots", "total_duration"]

# ═══════════════════════════════════════════════════════════════════════════════
# QUALITY ASSURANCE TOOLS
# ═══════════════════════════════════════════════════════════════════════════════

ai_limitation_checker:
  name: "AI Limitation Checker"
  description: |
    Checks prompts for known AI generation failure triggers.
    Suggests rewrites to avoid common issues.
  input_schema:
    type: object
    properties:
      prompt:
        type: string
      platform:
        type: string
    required: ["prompt", "platform"]
  known_limitations:
    - category: "Fluid Dynamics"
      trigger: "Physics-based liquid descriptions"
      solution: "Describe visual appearance: 'shattering into crystalline shards'"
    - category: "Hand Anatomy"
      trigger: "Complex hand poses, finger counting"
      solution: "Simple poses: 'fingers settling into familiar positions'"
    - category: "Text/Logos"
      trigger: "Specific text requests"
      solution: "Describe quality: 'quiet confidence of Swiss precision'"
    - category: "Reflections"
      trigger: "Specific reflection content"
      solution: "Keep vague: 'surfaces catching ambient light'"
    - category: "Volumetrics"
      trigger: "Specific steam/fog behavior"
      solution: "Atmospheric: 'vapor tendrils catching light'"

arc_validator:
  name: "Emotional Arc Validator"
  description: |
    Validates that emotional arc is complete and effective.
  input_schema:
    type: object
    properties:
      content:
        type: object
    required: ["content"]

brand_compliance_checker:
  name: "Brand Compliance Checker"
  description: |
    Checks output against brand guidelines.
  input_schema:
    type: object
    properties:
      content:
        type: object
      brand_profile:
        type: object
    required: ["content", "brand_profile"]
